{# Macro to render task control based on state #}
{% macro render_task_control(candidate_id, task_identifier, state, exists, display_satisfied=True) %}
{% if exists %}
<select class="table-status-select"
        onchange="updateTaskStatus('{{ candidate_id }}', '{{ task_identifier }}', this)">
    <option value="todo" {% if state == 'todo' %}selected{% endif %}>To Do</option>
    <option value="in_progress" {% if state == 'in_progress' %}selected{% endif %}>In Progress</option>
    <option value="done" {% if state == 'done' %}selected{% endif %}>Done</option>
</select>
{% else %}
<button class="btn btn-sm"{% if not display_satisfied %} style="background-color: #999; cursor: not-allowed;"{% endif %} onclick="createTask('{{ candidate_id }}', '{{ task_identifier }}')">Create</button>
{% endif %}
{% endmacro %}
