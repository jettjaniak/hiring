{# Macro to render task control based on state #}
{% macro render_task_control(candidate_id, task_identifier, state, exists) %}
{% if exists %}
<select class="table-status-select"
        onchange="updateTableTaskStatus('{{ candidate_id }}', '{{ task_identifier }}', this)">
    <option value="not_started" {% if state == 'not_started' %}selected{% endif %}>Not Started</option>
    <option value="in_progress" {% if state == 'in_progress' %}selected{% endif %}>In Progress</option>
    <option value="completed" {% if state == 'completed' %}selected{% endif %}>Completed</option>
    <option value="na" {% if state == 'na' %}selected{% endif %}>N/A</option>
</select>
{% else %}
<button class="btn btn-sm" onclick="createTableTask('{{ candidate_id }}', '{{ task_identifier }}')">Create</button>
{% endif %}
{% endmacro %}
